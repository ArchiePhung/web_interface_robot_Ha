{"ast":null,"code":"import React,{Component}from\"react\";import ROSLIB from\"roslib\";// import ROS2D from \"ros2d\";\nimport Alert from\"react-bootstrap/Alert\";import Config from\"../scripts/config\";import{jsx as _jsx}from\"react/jsx-runtime\";class Connection extends Component{constructor(){super();this.state={connected:false,ros:null};this.init_connection();}init_connection(){this.state.ros=new ROSLIB.Ros();console.log(\"Da khoi tao duoc ros\");this.state.ros.on(\"connection\",()=>{console.log(\"connection established!\");this.setState({connected:true});});this.state.ros.on(\"close\",()=>{console.log(\"connection is closed\");this.setState({connected:false});// try to recconect every 3 seconds\nsetTimeout(()=>{try{// this.state.ros.connect(\"ws://192.168.1.45:9090\");\nthis.state.ros.connect(\"ws://\"+Config.ROSBRIDGE_SERVER_IP+\":\"+Config.ROSBRIDGE_SERVER_PORT+\"\");}catch(error){console.log(\"connection problem\");}},Config.RECONNECTION_TIMER);});try{// this.state.ros.connect(\"ws://192.168.1.45:9090\");\nthis.state.ros.connect(\"ws://\"+Config.ROSBRIDGE_SERVER_IP+\":\"+Config.ROSBRIDGE_SERVER_PORT+\"\");console.log(\"ws://\"+Config.ROSBRIDGE_SERVER_IP+\":\"+Config.ROSBRIDGE_SERVER_PORT+\"\");}catch(error){console.log(\"connection problem\");}}render(){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Alert,{className:\"text-center m-3\",variant:this.state.connected?\"success\":\"danger\",children:this.state.connected?\"Robot Connected\":\"Robot Disconnected\"})});}}export default Connection;","map":{"version":3,"names":["React","Component","ROSLIB","Alert","Config","jsx","_jsx","Connection","constructor","state","connected","ros","init_connection","Ros","console","log","on","setState","setTimeout","connect","ROSBRIDGE_SERVER_IP","ROSBRIDGE_SERVER_PORT","error","RECONNECTION_TIMER","render","children","className","variant"],"sources":["/home/archie/simulation_ws/src/web_interfaces/react-ros-robot/src/components/Connection.jsx"],"sourcesContent":["import React, {Component} from \"react\";\nimport ROSLIB from \"roslib\";\n// import ROS2D from \"ros2d\";\nimport Alert from \"react-bootstrap/Alert\";\nimport Config from \"../scripts/config\"\n\nclass Connection extends Component{\n    state = {\n        connected: false,\n        ros:null,\n    };\n\n    constructor() {\n        super();\n        this.init_connection();\n    }\n\n    init_connection(){\n\n        this.state.ros = new ROSLIB.Ros();\n        console.log(\"Da khoi tao duoc ros\");\n\n        this.state.ros.on(\"connection\", () => {\n            console.log(\"connection established!\");\n            this.setState({connected: true});\n        });\n\n        this.state.ros.on(\"close\", () => {\n            console.log(\"connection is closed\");\n            this.setState({connected: false});\n\n            // try to recconect every 3 seconds\n            setTimeout(() => {\n                try{\n                    // this.state.ros.connect(\"ws://192.168.1.45:9090\");\n                    this.state.ros.connect(\n                        \"ws://\" + \n                        Config.ROSBRIDGE_SERVER_IP +\n                        \":\" + \n                        Config.ROSBRIDGE_SERVER_PORT +\n                        \"\"\n                    );\n                } catch (error) {\n                    console.log(\"connection problem\");\n                }                \n            }, Config.RECONNECTION_TIMER);\n        });\n\n        try{\n            // this.state.ros.connect(\"ws://192.168.1.45:9090\");\n            this.state.ros.connect(\n                \"ws://\" + \n                Config.ROSBRIDGE_SERVER_IP +\n                \":\" + \n                Config.ROSBRIDGE_SERVER_PORT +\n                \"\"\n            );\n\n            console.log(\n                \"ws://\" + \n                Config.ROSBRIDGE_SERVER_IP +\n                \":\" + \n                Config.ROSBRIDGE_SERVER_PORT +\n                \"\"\n            );\n        } catch (error) {\n            console.log(\"connection problem\");\n        }\n\n    }\n\n    render() {\n        return (\n            <div>\n                <Alert className=\"text-center m-3\"\n                        variant={this.state.connected ? \"success\" : \"danger\"}>\n                    {this.state.connected? \"Robot Connected\": \"Robot Disconnected\"}\n                </Alert>\n            </div>\n        );\n    }\n}\n\nexport default Connection;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAGC,SAAS,KAAO,OAAO,CACtC,MAAO,CAAAC,MAAM,KAAM,QAAQ,CAC3B;AACA,MAAO,CAAAC,KAAK,KAAM,uBAAuB,CACzC,MAAO,CAAAC,MAAM,KAAM,mBAAmB,QAAAC,GAAA,IAAAC,IAAA,yBAEtC,KAAM,CAAAC,UAAU,QAAS,CAAAN,SAAS,CAM9BO,WAAWA,CAAA,CAAG,CACV,KAAK,CAAC,CAAC,CAAC,KANZC,KAAK,CAAG,CACJC,SAAS,CAAE,KAAK,CAChBC,GAAG,CAAC,IACR,CAAC,CAIG,IAAI,CAACC,eAAe,CAAC,CAAC,CAC1B,CAEAA,eAAeA,CAAA,CAAE,CAEb,IAAI,CAACH,KAAK,CAACE,GAAG,CAAG,GAAI,CAAAT,MAAM,CAACW,GAAG,CAAC,CAAC,CACjCC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC,CAEnC,IAAI,CAACN,KAAK,CAACE,GAAG,CAACK,EAAE,CAAC,YAAY,CAAE,IAAM,CAClCF,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC,CACtC,IAAI,CAACE,QAAQ,CAAC,CAACP,SAAS,CAAE,IAAI,CAAC,CAAC,CACpC,CAAC,CAAC,CAEF,IAAI,CAACD,KAAK,CAACE,GAAG,CAACK,EAAE,CAAC,OAAO,CAAE,IAAM,CAC7BF,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC,CACnC,IAAI,CAACE,QAAQ,CAAC,CAACP,SAAS,CAAE,KAAK,CAAC,CAAC,CAEjC;AACAQ,UAAU,CAAC,IAAM,CACb,GAAG,CACC;AACA,IAAI,CAACT,KAAK,CAACE,GAAG,CAACQ,OAAO,CAClB,OAAO,CACPf,MAAM,CAACgB,mBAAmB,CAC1B,GAAG,CACHhB,MAAM,CAACiB,qBAAqB,CAC5B,EACJ,CAAC,CACL,CAAE,MAAOC,KAAK,CAAE,CACZR,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC,CACrC,CACJ,CAAC,CAAEX,MAAM,CAACmB,kBAAkB,CAAC,CACjC,CAAC,CAAC,CAEF,GAAG,CACC;AACA,IAAI,CAACd,KAAK,CAACE,GAAG,CAACQ,OAAO,CAClB,OAAO,CACPf,MAAM,CAACgB,mBAAmB,CAC1B,GAAG,CACHhB,MAAM,CAACiB,qBAAqB,CAC5B,EACJ,CAAC,CAEDP,OAAO,CAACC,GAAG,CACP,OAAO,CACPX,MAAM,CAACgB,mBAAmB,CAC1B,GAAG,CACHhB,MAAM,CAACiB,qBAAqB,CAC5B,EACJ,CAAC,CACL,CAAE,MAAOC,KAAK,CAAE,CACZR,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC,CACrC,CAEJ,CAEAS,MAAMA,CAAA,CAAG,CACL,mBACIlB,IAAA,QAAAmB,QAAA,cACInB,IAAA,CAACH,KAAK,EAACuB,SAAS,CAAC,iBAAiB,CAC1BC,OAAO,CAAE,IAAI,CAAClB,KAAK,CAACC,SAAS,CAAG,SAAS,CAAG,QAAS,CAAAe,QAAA,CACxD,IAAI,CAAChB,KAAK,CAACC,SAAS,CAAE,iBAAiB,CAAE,oBAAoB,CAC3D,CAAC,CACP,CAAC,CAEd,CACJ,CAEA,cAAe,CAAAH,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}